---
layout: post
title:  "Инструкция для платежного модуля Яндекс Касса"
date:   2016-03-01 18:57:44 +0300
categories: mage1
permalink: yandekassa.html
---
# Инструкция для платежного модуля для CMS Magento Яндекс Касса

#### Возможности:
* Автоматическая фиксация платежа в магазине при успешной оплате заказа;
* Настройка условий доступности данного метода оплаты;
* 8 вариантов оплаты на выбор;
* Возможность оплаты заказа после подтверждения менеджером;
* Дополнительные отправки счета и письма от имени магазина;
* Отправка ссылки на оплату по почте и доступность в личном кабинете покупателя;
* Автоматическое перенаправление покупателя на оплату при оформлении заказа;
* Возможность возврата платежа (Refund).

### Настройка модуля

**Для работы модуля требуются установленный SSL сертификат (для защищенных HTTPS соединений)**{: .warning}

Адреса контроллеров для работы модуля (где вместо www.site.ru - ваш домен):

------------      | -------------
сheckURL          | https://www.site.ru/yandexkassa/merchant/check/
paymentAvisoURL   | https://www.site.ru/yandexkassa/merchant/paymentaviso/
successURL        | http://www.site.ru/yandexkassa/merchant/success/
failURL           | http://www.site.ru/yandexkassa/merchant/cancel/
{: .module-table}



**Пароль** - заполняется пароль такой же, как в поле ShopPassword в ЛК Яндекс

**ShopID, scid** - выдаются техническим специалистом Яндекс.Деньги при подключении к сервису Яндекс.Касса.

**Тестовый режим**- включает режим для проверки корректности работы приёма оплаты. В тестовом и боевом режиме разные scid !!!

**Включить контроль разрешений для оплаты заказа по статусам** - если статус заказа совпадает с данной настройкой, то тогда клиент может оплатить заказ.

**Отправить копию сообщения на этот email** - при успешной оплате на указанный адрес будут приходить сообщения.
Использование вида подключения HTTP + Merchant Web Services позволяет делать возвраты платежей по заказу.

[Информация по протоколу MWS](https://tech.yandex.ru/money/doc/payment-solution/payment-management/payment-management-about-docpage/){: .button}

[Информация по протоколу HTTP](https://tech.yandex.ru/money/doc/payment-solution/payment-notifications/payment-notifications-http-docpage/){: .button}

### Для подключения необходимо:
1. Написать вашему менеджеру Яндекс Денег о желании подключиться к протоколу MWS
2. Сгенерировать запрос на сертификат ([информация](https://tech.yandex.ru/money/doc/payment-solution/ssl-docpage/))
3. Отправить запрос вашему менеджеру
4. Внести в настройки магазина на Magento полученный сертификат
